{% extends 'user-account-section/base.html' %}
{% load filters %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block stylesheet %}
 <style>

   * { box-sizing: border-box; }


        .carousel {
            /*Couresel back*/
         }


    .deals-title {
        font-family: Calibri;
        font-size: 28px;
        float: left;
        margin-left: 30px;
        color: #434f46;
    }

    /*Custom cards styling end*/

    .carousel-cell{
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 10px;
        width: 200px;
        height: 290px;
        border-radius: 8px;
        background-color: white;
        overflow: hidden;
        position: relative;
        -webkit-box-shadow: 0px 0px 10px -5px rgba(0,0,0,0.66);
        -moz-box-shadow: 0px 0px 10px -5px rgba(0,0,0,0.66);
        box-shadow: 0px 0px 10px -5px rgba(0,0,0,0.66);

    }
    .carousel-cell:hover{
        transition: 0.5s;
        -webkit-box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.66);
        -moz-box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.66);
        box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.66);
    }

     .productImgDiv{
         width: 200px;
         height: 180px;
         border-bottom: 1px dashed grey;
         position: absolute;
     }
     .productImgDiv img{
         width: 200px;
         height: 170px;
         margin-top: 0px;
     }
     .bestSellerBadge{
         background-color: orangered;
         color: white;
         width: 130px;
         height: 30px;
         text-align: center;
         font-family: Calibri;
         font-size: 15px;
         line-height: 30px;
         position: absolute;
         top: 15px;
         left: -35px;
         float: left;
         transform: rotate(-45deg);
     }
     .titleAndCateg {
         width: 200px;
         height: 36px;
         position: absolute;
         margin-top: 187px;
     }
     .titleAndCateg a{
         text-decoration: none;
     }

     .titleAndCateg h4 {
         font-size: 17px;
         margin-left: 10px;
         margin-right: 10px;
         margin-bottom: 0px;
         line-height: 17px;
         color: darkslategrey;
         font-family: Calibri;
         font-weight: bold;
         overflow: hidden;
     }

     .titleAndCateg h4:hover{
         color: indigo;
     }
     .categeory {
         font-family: Calibri;
         font-size: 16px;
         color: green;
         margin-top: 3px;
         text-align: center;
         margin-bottom: 0px;
     }

     .ratingDiv{
         margin-top: 228px;
         width: 200px;
         float: left;
         position: absolute;
         height: 30px;
     }

      .ratingP {
         margin-left: 10px;
         font-size: 17px;
         font-weight: bold;
         color: #434f46;
         float: left;
          line-height: 30px;
     }

     .ratingImage{
         width: 90px;
         height: 30px;
         float: left;
         margin-left: 3px;
         margin-top: 0px;
     }

     .totalRatings {
         float: left;
         margin-left: 3px;
         height: 30px;
         line-height: 30px;
         font-family: Calibri;
         color: grey;
         font-size: 14px;
     }




    .pricingDiv{
        width: 200px;
        height: 22px;
        margin-top: 233px;
        position: absolute;
    }
    .pricingDiv .realPrice{
        text-align: right;
        float: right;
        margin-right: 10px;
        font-size: 22px;
        color: #434f46;
        line-height: 22px;
        font-family: Calibri;
        font-weight: bold;


    }
     .pricingDiv .displayPrice{
         text-align: left;
         float: left;
         margin-left: 10px;
         font-size: 18px;
         font-family: Calibri;
         text-decoration: line-through;
         color: grey;
         line-height: 22px;
     }
     .discountSpan {
         background-color: #265182;
         color: white;
         width: 45px;
         height: 22px;
         text-align: center;
         border-radius: 3px;
         font-family: Calibri;
         font-size: 17px;
         float: left;
         margin-left: 8px;
         line-height: 22px;
     }

     .back-cover{
         position: absolute;
         background-color: orange;
         opacity: 0.9;
         width: 200px;
         height: 290px;
         z-index: 1;
         top: 0;
         left: 0;
         display: none;
     }

     .carousel-cell:hover .back-cover{
         display: block;
         transition: 0.6s;
         text-align: center;
     }

     .back-cover-body{
         margin-top: 101px;
         width: 200px;
         height: 88px;
     }

     .couponBtn{
         background-color: indigo;
         color: white;
         width: 130px;
     }

     .couponBtn:hover{
         color: white;
         background-color: #09084a;

     }
     .detailsBtn{
         width: 130px;
         background-color: #b007a8;
         color: white;
     }
     .detailsBtn:hover{
         background-color: #850382;
         color: white;
     }
     /*Custom cards styling end*/






        .carousel-cell.is-selected {
            border: 1px solid indigo;
        }

        /* cell number */
        .carousel-cell:before {
          display: block;
        }

        .flickity-page-dots{
            display: none;
        }

                /* big previous & next buttons */
        .flickity-prev-next-button {
            background-color: indigo;
        }
        /* icon color */
        .flickity-button-icon {
            fill: white;
        }
        /* hide disabled button */
        .flickity-button:disabled {
            display: none;
        }
        .flickity-button:hover{
            background-color: #232466;

        }
        .flickity-prev-next-button:hover{
            background-color: #232466;
        }


        .exploreMore{
            background-color: #232466;
            padding: 0px 8px 0px 8px;
            text-align: center;
        }
        .exploreMore a{
            font-family: Calibri;
            font-size: 26px;
            line-height: 290px;
            text-decoration: none;
            font-weight: bold;
            color: white;
            border-radius: 0px !important;
        }

        .exploreMore a:hover{
            color: #ded7de;
        }

    </style>
{% endblock %}


        <!-- Begin Page Content -->
        {% block content %}
          <!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h3 mb-0 text-gray-800">Welcome back, {{ request.user.first_name|decrypt:request.user.first_name }} {{ request.user.last_name|decrypt:request.user.last_name }}</h1>
              </div>



          <!-- Content Row -->
          <div class="row">

            <!-- Earnings (Monthly) Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Coupons</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{ TotalCoupons }}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-calendar fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Total active coupons -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Active Coupons</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{ TotalActiveCoupons }}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-tags fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Earnings (Monthly) Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Users satisfaction</div>
                      <div class="row no-gutters align-items-center">
                        <div class="col-auto">
                          <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">99.9%</div>
                        </div>
                        <div class="col">
                          <div class="progress progress-sm mr-2">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 95%" aria-valuenow="99" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pending Requests Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Total brands</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">{{ TotalBrands }}</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-building fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>




          <!-- Content Row -->
          <div class="row">

            <!-- Content Column -->
            <div class="col-lg-6 mb-4">

              <!-- Project Card Example -->
              <div class="card shadow mb-4">
                <div class="card-header">
                  <h6 class="m-0 font-weight-bold text-primary">Trending Deals</h6>
                </div>
                <div class="card-body">

                  <div class="container">

          <div class="carousel" data-flickity='{ "groupCells": true }'>

                {% for data in TenTrendingDeals %}
                   <div class="carousel-cell">
                       <div class="productImgDiv">
                           {% if data.CouponProductTotalRating > 500 %}
                                <span class="bestSellerBadge">Best Seller</span>
                           {% endif %}
                           <img src="{{ data.CouponProductImage.url }}" alt="Product image not found.">
                       </div>

                       <div class="titleAndCateg">
                           <a href="#"><h4>{{ data.CouponProductTitle|truncatechars:15 }}</h4></a>
                           <p class="categeory"><i class="fa fa-check-circle"></i>&nbsp;Coupon verified</p>
                       </div>

                       <div class="ratingDiv">
                           <p class="ratingP">{{ data.CouponProductRating }}</p>
                           {% if data.CouponProductRating >= 1.0 and data.CouponProductRating < 1.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/1.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 1.5 and data.CouponProductRating < 2.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/1-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 2.0 and data.CouponProductRating < 2.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/2.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 2.5 and data.CouponProductRating < 3.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/2-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 3.0 and data.CouponProductRating < 3.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/3.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 3.5 and data.CouponProductRating < 4.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/3-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 4.0 and data.CouponProductRating < 4.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/4.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 4.5 and data.CouponProductRating < 4.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/4-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 4.5 and data.CouponProductRating <= 5.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/5.PNG' %}" alt="Rating image not found.">
                           {% endif %}

                           <span class="totalRatings">({{ data.CouponProductTotalRating }}+)</span>
                       </div>
                     <br>
                      <div class="pricingDiv">
                          <h4 class="displayPrice">${{ data.CouponProductDisplayPrice }}</h4>
                          <span class="discountSpan">{{ data.CouponProductPrice|discount:data.CouponProductDisplayPrice }}%</span>
                          <h4 class="realPrice">${{ data.CouponProductPrice }}</h4>

                      </div>

                       <div class="back-cover">
                           <div class="back-cover-body">
                               <a href="{{ data.CouponLink }}" class="btn couponBtn" target="_blank">Get Deal</a><br><br>
                               <a class="btn detailsBtn" href="{% url 'CouponDetailsViewStatic' data.CouponProductSlug %}">View details</a>
                           </div>

                       </div>
                     </div>
              {% endfor %}









                <div class="carousel-cell exploreMore">
                    <a href="{% url 'HotDeals' %}">Explore more</a>
                </div>
            </div>

                </div>
              </div>

            </div>

            </div>










            <div class="col-lg-6 mb-4">

              <!-- Illustrations -->
              <div class="card shadow mb-4">
                <div class="card-header py-3">
                  <h6 class="m-0 font-weight-bold text-primary">Best Deals For You</h6>
                </div>
                <div class="card-body">

                   <div class="container">

          <div class="carousel" data-flickity='{ "groupCells": true }'>

                {% for data in TenBestDeals %}
                   <div class="carousel-cell">
                       <div class="productImgDiv">
                           {% if data.CouponProductTotalRating > 100 %}
                                <span class="bestSellerBadge">Best Seller</span>
                           {% endif %}
                           <img src="{{ data.CouponProductImage.url }}" alt="Product image not found.">
                       </div>

                       <div class="titleAndCateg">
                           <a href="#"><h4>{{ data.CouponProductTitle|truncatechars:15 }}</h4></a>
                           <p class="categeory"><i class="fa fa-check-circle"></i>&nbsp;Coupon verified</p>
                       </div>

                       <div class="ratingDiv">
                           <p class="ratingP">{{ data.CouponProductRating }}</p>
                           {% if data.CouponProductRating >= 1.0 and data.CouponProductRating < 1.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/1.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 1.5 and data.CouponProductRating < 2.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/1-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 2.0 and data.CouponProductRating < 2.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/2.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 2.5 and data.CouponProductRating < 3.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/2-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 3.0 and data.CouponProductRating < 3.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/3.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 3.5 and data.CouponProductRating < 4.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/3-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 4.0 and data.CouponProductRating < 4.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/4.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 4.5 and data.CouponProductRating < 4.5 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/4-5.PNG' %}" alt="Rating image not found.">
                           {% elif data.CouponProductRating >= 4.5 and data.CouponProductRating <= 5.0 %}
                                <img class="ratingImage" src="{% static 'public-section/imagesANDicons/ratings/5.PNG' %}" alt="Rating image not found.">
                           {% endif %}

                           <span class="totalRatings">({{ data.CouponProductTotalRating }}+)</span>
                       </div>
                     <br>
                      <div class="pricingDiv">
                          <h4 class="displayPrice">${{ data.CouponProductDisplayPrice }}</h4>
                          <span class="discountSpan">{{ data.CouponProductPrice|discount:data.CouponProductDisplayPrice }}%</span>
                          <h4 class="realPrice">${{ data.CouponProductPrice }}</h4>

                      </div>

                       <div class="back-cover">
                           <div class="back-cover-body">
                               <a href="{{ data.CouponLink }}" class="btn couponBtn" target="_blank">Get Deal</a><br><br>
                               <a class="btn detailsBtn" href="{% url 'CouponDetailsViewStatic' data.CouponProductSlug %}">View details</a>
                           </div>

                       </div>
                     </div>
              {% endfor %}









                <div class="carousel-cell exploreMore">
                    <a href="{% url 'MyDeals' %}">Explore more</a>
                </div>
            </div>

                </div>



                </div>
              </div>

            </div>
          </div>

        {% endblock %}
        <!-- /.container-fluid -->
